\documentclass{pxcsdoc}
\usepackage{praxfuzz}
\usepackage{parskip}
\usepackage{multicol}
\usepackage{enumerate}
\usepackage{proof}


\newcommand{\true}{\mathrel{\sf true}}
\newcommand{\false}{\mathrel{\sf false}}

\def\Nil{nil}%
\def\Optional{\mathop{\rm optional}}
\def\The{the~}%


\makeindex
\usepackage{trace}

\documentset{Tokeneer ID Station}

\reference{S.P1229.50.1}

\title{Formal Design}

\synopsis{
This document is the formal design of the core
Token ID Station (TIS), which forms part of Tokeneer. 
}

\contentsinside

\status{Definitive}

\issuenumber{1.3}

\date{19th August 2008}

\copiedto{%
\begin{minipage}[t]{100mm}%
\vspace{-\abovedisplayskip}%
\begin{multicols}{2}%
\raggedright%
{\bfseries NSA}\\
Randolph Johnson \\[1ex]
{\bfseries SPRE Inc.}\\
\newpage
{\bfseries Praxis High Integrity Systems}\\
Project Team \\[4ex]
~\\
\end{multicols}\end{minipage}
}
\frontsheet{%
Quality
}

\originators{%
Janet Barnes}

\approverA{Approver}{David Cooper}

\confidentiality{}

\begin{document}

\maketitle
%\include{renames}

%=========================================================================

\documentcontrol
Copyright \copyright (2003) United States Government, as represented by the
Director, National Security Agency. All rights reserved.
This material was originally developed by Praxis High Integrity
Systems Ltd. under contract to the National Security Agency.
\section*{Changes History}
\textit{All issues of this document have been type-checked with \fuzz~and have
  given no errors.}
\begin{description}
\item [Issue 0.1] 
(16th April 2003) Initial draft for formal review.
\item [Issue 0.2]
(28th May 2003) Updated following review comments from David Cooper.
\item [Issue 1.0]
(4th July 2003) Updated following completion of precondition
checks. Incorporates changes resulting from NSA review comments on the
Formal Specification.
\item [Issue 1.1]
(22nd July 2003) Updated following review comments from
NSA. Added appendix containing an example refinement proof. 
Updated to incorporate corrections detailed in incident reports
S.P1229.6.8-10, 16 and 18.
\item [Issue 1.2]
(22nd August 2003) 
Definitive issue correcting faults found during implementation and
system test
\begin{itemize}
\item
S.P1229.6.21 - Token information cleared too early in shutdown.
\item 
S.P1229.6.24 - Correct classification of audit entries.
\item
S.P1225.6.28 - Audit Element descriptions missing for archive entries.
\item
S.P1229.6.30 - $AdminFinishOpC$ missing from $FinishArchiveLogContext$.
\item
S.P1229.6.31 - Wrong description for audit entry in $FinishArchiveLogBadMatchC$.
\item
S.P1229.6.32 - Improve poor text messages on screen.
\item
S.P1229.6.33 - Make initial configuration realistic.
\item
S.P1229.6.34 - Contraints required on config data to ensure issued
auth certs allow entry.
\item
S.P1229.6.35 - Audit entry required for $AdminTokenTimeout$.
\item
S.P1229.6.36 - Screen should show busy message when a user entry is in progress.
\item
S.P1229.6.38 - Operation failures should be reported on screen.
\item
S.P1229.6.42 - System faults need not always be critical.
\end{itemize}
\item [Issue 1.3]
(19th August 2008) Updated for public release.
\end{description}

\section*{Changes Forecast}

None. This document is now under change control.

\section*{References}
\begin{thebibliography}{99}
\bibitem{Spivey}
The Z Notation: A Reference Manual, J.M Spivey, Prentice Hall, Second Edition,
1992
\bibitem{SRS}
TIS Software Requirements Specification, S.P1229.41.1.
\bibitem{PP}
TIS Kernel Protection Profile, SPRE Inc, Version 1.0, 5 February 2003.
\bibitem{FS}
TIS Formal Specification, S.P1229.50.1.
\end{thebibliography}

\section*{Abbreviations}
{\footnotesize\begin{tabular}{ll}
AA           & Attribute Authority \\
ATR          & Answer-to-Reset \\
CA           & Certification Authority \\
FAR          & False Acceptance Rate \\
I\&A         & Identification and Authentication \\
RSA          & Rivest Shamir Adelman algorithm \\   
SPARK        & SPADE Ada Kernel (analysable Ada subset from Praxis) \\
SRS          & Software Requirements Specification \\
TIS          & Token ID Station \\
\end{tabular}}

%==========================================================================


\tableofcontents


\include{50_1_Intro}

\include{50_1_TIS}

\include{50_1_Interfaces}

\include{50_1_Internal}

\include{50_1_UserEntry}

\include{50_1_Enclave}

\include{50_1_Start}

\include{50_1_Whole}

\appendix

\input{50_1_Summary}

\input{50_1_Abstraction}

\input{50_1_Refinement}


\chapter{Z index}

This section contains an index of Z terms.
This contains all the Z schemas, types and functions
defined in the specification. 

\begin{multicols}{2}\scriptsize
\begin{theindex}
\input{z-index}
\end{theindex}
\end{multicols}

\chapter{Traceunit index}

An index of traceunits. This contains all the traceunits placed in the
specification to enable the elements of the specification to be traced to
the design.

\begin{multicols}{2}\scriptsize
\begin{theindex}
\input{trace-index}
\end{theindex}
\end{multicols}

\chapter{Requirements index}

An index of traceunits. This contains all the traceunits in the 
requirements documents . All requirements are listed with the pages
from which they are referenced. 

\begin{multicols}{2}\scriptsize
\begin{theindex}
\input{req-index}
\end{theindex}
\end{multicols}

%===========================================================================


\end{document}
